<!-- src/app/features/courses/course-details/course-details.component.html -->
<div class="course-details">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="loading-container">
        <div class="loading-spinner"></div>
        <p>Loading course details...</p>
    </div>

    <div *ngIf="!isLoading && course" class="course-content">
        <!-- Course Hero Section -->
        <section class="course-hero">
            <div class="container">
                <div class="course-header">
                    <div class="course-info">
                        <h1 class="course-title">{{ course.title }}</h1>

                        <div class="course-meta">
                            <div class="meta-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7Z"></path>
                                    <path d="m5 16 3 5"></path>
                                    <path d="m19 16-3 5"></path>
                                </svg>
                                <span>{{ course.level }}</span>
                            </div>

                            <div class="meta-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <polyline points="12 6 12 12 16 14"></polyline>
                                </svg>
                                <span>{{ course.duration }}</span>
                            </div>

                            <div class="meta-item">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                                    <circle cx="12" cy="10" r="3"></circle>
                                </svg>
                                <span>{{ course.enrollmentCount | number }} enrolled</span>
                            </div>

                            <div class="meta-item rating">
                                <div class="stars">
                                    <span *ngFor="let i of [1, 2, 3, 4, 5]" class="star"
                                        [class.filled]="i <= course.rating">â˜…</span>
                                </div>
                                <span class="rating-value">{{ course.rating }} ({{ course.reviewCount }} reviews)</span>
                            </div>
                        </div>

                        <p class="course-description">{{ course.description }}</p>

                        <div class="course-instructor-preview">
                            <img [src]="course.instructor.avatar" alt="{{ course.instructor.name }}"
                                class="instructor-avatar">
                            <div>
                                <p class="instructor-name">{{ course.instructor.name }}</p>
                                <p class="instructor-title">{{ course.instructor.title }}</p>
                            </div>
                        </div>
                    </div>

                    <div class="course-card">
                        <div class="video-container">
                            <iframe [src]="videoUrl" frameborder="0" allowfullscreen></iframe>
                        </div>

                        <div class="card-content">
                            <div class="price">${{ course.price }}</div>

                            <button class="enroll-btn" (click)="enrollInCourse()">Enroll Now</button>

                            <ul class="course-features">
                                <li>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                    </svg>
                                    <span>{{ course.duration }} of content</span>
                                </li>
                                <li>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="22 12 16 12 14 15 10 15 8 12 2 12"></polyline>
                                        <path
                                            d="M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z">
                                        </path>
                                    </svg>
                                    <span>{{ course.projects.length }} projects</span>
                                </li>
                                <li>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                        <line x1="16" y1="2" x2="16" y2="6"></line>
                                        <line x1="8" y1="2" x2="8" y2="6"></line>
                                        <line x1="3" y1="10" x2="21" y2="10"></line>
                                    </svg>
                                    <span>Flexible schedule</span>
                                </li>
                                <li>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34">
                                        </path>
                                        <polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon>
                                    </svg>
                                    <span>Certificate of completion</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Course Tabs Navigation -->
        <nav class="course-tabs">
            <div class="container">
                <div class="tabs-container">
                    <button [class.active]="activeTab === 'overview'" (click)="setActiveTab('overview')"
                        class="tab-btn">
                        Overview
                    </button>

                    <button [class.active]="activeTab === 'syllabus'" (click)="setActiveTab('syllabus')"
                        class="tab-btn">
                        Syllabus
                    </button>

                    <button [class.active]="activeTab === 'instructors'" (click)="setActiveTab('instructors')"
                        class="tab-btn">
                        Instructor
                    </button>

                    <button [class.active]="activeTab === 'reviews'" (click)="setActiveTab('reviews')" class="tab-btn">
                        Reviews
                    </button>
                </div>
            </div>
        </nav>

        <!-- Course Tab Content -->
        <section class="tab-content">
            <div class="container">
                <!-- Overview Tab -->
                <div *ngIf="activeTab === 'overview'" class="overview-tab">
                    <div class="content-section">
                        <h2>About This Course</h2>
                        <div class="formatted-text">
                            <p>{{ course.longDescription }}</p>
                        </div>
                    </div>

                    <div class="content-section">
                        <h2>What You'll Learn</h2>
                        <div class="skills-grid">
                            <div class="skill-item" *ngFor="let skill of course.skills">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                                </svg>
                                <span>{{ skill }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h2>Prerequisites</h2>
                        <ul class="prerequisites-list">
                            <li *ngFor="let prerequisite of course.prerequisites">{{ prerequisite }}</li>
                        </ul>
                    </div>

                    <div class="content-section">
                        <h2>Projects</h2>
                        <div class="projects-container">
                            <div class="project-card" *ngFor="let project of course.projects; let i = index">
                                <div class="project-number">Project {{ i + 1 }}</div>
                                <h3>{{ project.title }}</h3>
                                <p>{{ project.description }}</p>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h2>Frequently Asked Questions</h2>
                        <div class="faq-container">
                            <div class="faq-item" *ngFor="let faq of course.faqs; let i = index">
                                <div class="faq-question">
                                    <h3>{{ faq.question }}</h3>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                        stroke-linejoin="round">
                                        <polyline points="6 9 12 15 18 9"></polyline>
                                    </svg>
                                </div>
                                <div class="faq-answer">
                                    <p>{{ faq.answer }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Syllabus Tab -->
                <div *ngIf="activeTab === 'syllabus'" class="syllabus-tab">
                    <h2>Course Syllabus</h2>
                    <p class="syllabus-description">This course is designed to be completed in {{ course.duration }}
                        with about 10-15 hours of work per week.</p>

                    <div class="syllabus-container">
                        <div class="syllabus-module" *ngFor="let module of course.syllabus; let i = index">
                            <div class="module-header">
                                <div class="module-number">Module {{ i + 1 }}</div>
                                <h3>{{ module.title }}</h3>
                                <div class="module-duration">{{ module.duration }}</div>
                            </div>

                            <div class="module-content">
                                <ul class="lessons-list">
                                    <li *ngFor="let lesson of module.lessons">{{ lesson }}</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Instructor Tab -->
                <div *ngIf="activeTab === 'instructors'" class="instructors-tab">
                    <h2>Meet Your Instructor</h2>

                    <div class="instructor-profile">
                        <div class="instructor-header">
                            <img [src]="course.instructor.avatar" alt="{{ course.instructor.name }}"
                                class="instructor-avatar">
                            <div class="instructor-info">
                                <h3>{{ course.instructor.name }}</h3>
                                <p class="instructor-title">{{ course.instructor.title }}</p>
                            </div>
                        </div>

                        <div class="instructor-bio">
                            <p>{{ course.instructor.bio }}</p>
                        </div>
                    </div>
                </div>

                <!-- Reviews Tab -->
                <div *ngIf="activeTab === 'reviews'" class="reviews-tab">
                    <div class="reviews-header">
                        <div class="reviews-summary">
                            <h2>Student Reviews</h2>
                            <div class="rating-summary">
                                <div class="rating-average">
                                    <div class="average-number">{{ course.rating }}</div>
                                    <div class="stars">
                                        <span *ngFor="let i of [1, 2, 3, 4, 5]" class="star"
                                            [class.filled]="i <= course.rating">â˜…</span>
                                    </div>
                                    <div class="total-reviews">{{ course.reviewCount }} reviews</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="reviews-list">
                        <div class="review-card" *ngFor="let review of course.reviews">
                            <div class="review-header">
                                <img [src]="review.avatar" alt="{{ review.name }}" class="reviewer-avatar">
                                <div class="reviewer-info">
                                    <h4>{{ review.name }}</h4>
                                    <div class="review-meta">
                                        <div class="stars">
                                            <span *ngFor="let i of [1, 2, 3, 4, 5]" class="star"
                                                [class.filled]="i <= review.rating">â˜…</span>
                                        </div>
                                        <span class="review-date">{{ review.date | date }}</span>
                                    </div>
                                </div>
                            </div>

                            <div class="review-content">
                                <p>{{ review.comment }}</p>
                            </div>
                        </div>
                    </div>
                    <!-- src/app/features/courses/course-details/course-details.component.html (continued) -->
                    <div class="reviews-list">
                        <div class="review-card" *ngFor="let review of course.reviews">
                            <div class="review-header">
                                <img [src]="review.avatar" alt="{{ review.name }}" class="reviewer-avatar">
                                <div class="reviewer-info">
                                    <h4>{{ review.name }}</h4>
                                    <div class="review-meta">
                                        <div class="stars">
                                            <span *ngFor="let i of [1, 2, 3, 4, 5]" class="star"
                                                [class.filled]="i <= review.rating">â˜…</span>
                                        </div>
                                        <span class="review-date">{{ review.date | date }}</span>
                                    </div>
                                </div>
                            </div>

                            <div class="review-content">
                                <p>{{ review.comment }}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Call to Action -->
        <section class="cta-section">
            <div class="container">
                <div class="cta-content">
                    <h2>Ready to start learning?</h2>
                    <p>Enroll now and begin your journey with {{ course.title }}</p>
                    <button class="enroll-btn" (click)="enrollInCourse()">Enroll Now</button>
                </div>
            </div>
        </section>
    </div>

    <!-- Course Not Found -->
    <div *ngIf="!isLoading && !course" class="course-not-found">
        <div class="container">
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="8" x2="12" y2="12"></line>
                <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
            <h2>Course Not Found</h2>
            <p>The course you're looking for doesn't exist or has been removed.</p>
            <button class="back-btn" routerLink="/courses">Browse Courses</button>
        </div>
    </div>
</div>